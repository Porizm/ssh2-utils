<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Ssh2-utils by maboiteaspam</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Ssh2-utils</h1>
        <h2>nodejs ssh2 utils module to ease ssh and sftp usage with nodejs</h2>

        <section id="downloads">
          <a href="https://github.com/maboiteaspam/ssh2-utils/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/maboiteaspam/ssh2-utils/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/maboiteaspam/ssh2-utils" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="ssh2utils-" class="anchor" href="#ssh2utils-" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils <a href="https://travis-ci.org/maboiteaspam/ssh2-utils"><img src="https://travis-ci.org/maboiteaspam/ssh2-utils.svg?branch=master" alt="Build Status"></a>
</h1>

<p>A library to ease use of excellent modules ssh2.</p>

<p>Provide a set of methods to exec/run/getFile/putFile/getDir/putDir.</p>

<hr>

<h1>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h1>

<p><code>npm i ssh2-utils --save</code></p>

<hr>

<h1>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h1>

<p>Automatic source code documentation generation </p>

<p>is supported by jsdoc at <a href="https://maboiteaspam.github.io/ssh2-utils/docs/">https://maboiteaspam.github.io/ssh2-utils/docs/</a></p>

<p>Automatic tests documentation  generation </p>

<p>is support by mocha <a href="https://github.com/maboiteaspam/ssh2-utils/tree/gh-pages/mocha-tests.md">https://github.com/maboiteaspam/ssh2-utils/tree/gh-pages/mocha-tests.md</a></p>

<h3>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h3>

<ul>
<li>
<a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html"><code>SSH2Utils</code></a>

<ul>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#open"><code>open</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#exec"><code>exec</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#run"><code>run</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#runMultiple"><code>runMultiple</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#mktemp"><code>mktemp</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#readFile"><code>readFile</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#getFile"><code>getFile</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#putDir"><code>putDir</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#putDirSudo"><code>putDirSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#readDir"><code>readDir</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#putFile"><code>putFile</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#putFileSudo"><code>putFileSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#mkdir"><code>mkdir</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#mkdirSudo"><code>mkdirSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#rmdir"><code>rmdir</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#rmdirSudo"><code>rmdirSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#writeFile"><code>writeFile</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#writeFileSudo"><code>writeFileSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#getDir"><code>getDir</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#fileExists"><code>fileExists</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#fileExistsSudo"><code>fileExistsSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#ensureFileContains"><code>ensureFileContains</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#ensureFileContainsSudo"><code>ensureFileContainsSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#ensureEmptyDir"><code>ensureEmptyDir</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#ensureEmptyDirSudo"><code>ensureEmptyDirSudo</code></a></li>
<li><a href="http://maboiteaspam.github.io/ssh2-utils/docs/SSH2Utils.html#ensureOwnership"><code>ensureOwnership</code></a></li>
</ul>
</li>
</ul>

<hr>

<h3>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h3>

<p><a name="exec"></a></p>

<h3>
<a id="ssh2utilsexecserver-cmd-callback" class="anchor" href="#ssh2utilsexecserver-cmd-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.exec(server, cmd, callback)</h3>

<p>Execute a command on remote server and return its output.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>cmd</code> - A command line to execute on remote.</li>
<li>
<code>callback(err,stdout,stderr,server,conn)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> isa Boolean.</li>
<li>
<code>stdout</code> <code>stderr</code> are String.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.<span class="pl-c1">exec</span>(server, <span class="pl-s"><span class="pl-pds">'</span>ls<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>,<span class="pl-smi">stdout</span>,<span class="pl-smi">stderr</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
        <span class="pl-en">console</span><span class="pl-c1">.log</span>(stdout);
        <span class="pl-en">console</span><span class="pl-c1">.log</span>(stderr);
    });</pre></div>

<p><a name="run"></a></p>

<h3>
<a id="ssh2utilsrunserver-cmd-callback" class="anchor" href="#ssh2utilsrunserver-cmd-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.run(server, cmd, callback)</h3>

<p>Execute a command on remote server and return its streams.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>cmd</code> - A command line to execute on remote.</li>
<li>
<code>callback(err,stdout,stderr,server,conn)</code> - A callback called on command line sent. 

<ul>
<li>
<code>err</code> isa Boolean.</li>
<li>
<code>stdout</code> <code>stderr</code> are Streams.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.run(server, [<span class="pl-s"><span class="pl-pds">'</span>ls<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>time<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">err</span>,<span class="pl-smi">stdout</span>,<span class="pl-smi">stderr</span>,<span class="pl-smi">server</span>,<span class="pl-smi">conn</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
        stdout.on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(){
            <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span><span class="pl-k">+</span>data);
        });
        stderr.on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(){
            <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span><span class="pl-k">+</span>data);
        });
        stdout.on(<span class="pl-s"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>,<span class="pl-k">function</span>(){
            conn.end();
        });
    });</pre></div>

<p><a name="runMultiple"></a></p>

<h3>
<a id="ssh2utilsrunmultipleserver-cmds-oncmdcplt-ondone" class="anchor" href="#ssh2utilsrunmultipleserver-cmds-oncmdcplt-ondone" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.runMultiple(server, cmds, onCmdCplt, onDone)</h3>

<h5>
<a id="ssh2utilsrunmultipleserver-cmds-ondone" class="anchor" href="#ssh2utilsrunmultipleserver-cmds-ondone" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.runMultiple(server, cmds, onDone)</h5>

<p>Execute a series of command on remote server and returns their output.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>cmds</code> - An array of commands line to execute on remote.</li>
<li>
<code>onCmdCplt(command, response, server)</code> - A callback called on command line completion. 

<ul>
<li>
<code>command</code> the completed command line.</li>
<li>
<code>response</code> the completed command line response.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
</ul>
</li>
<li>
<code>onDone(sessionText, sshObj)</code> - A callback called on session completion. 

<ul>
<li>
<code>err</code> an Error.</li>
<li>
<code>sessionText</code> a String.</li>
<li>
<code>sshObj</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.runMultiple(server, [<span class="pl-s"><span class="pl-pds">'</span>ls<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>time<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">sessionText</span>, <span class="pl-smi">sshObj</span>){
        <span class="pl-en">console</span><span class="pl-c1">.log</span>(sessionText);
    });</pre></div>

<p><a name="getFile"></a></p>

<h3>
<a id="ssh2utilsgetfileserver-remotefile-localpath-callback" class="anchor" href="#ssh2utilsgetfileserver-remotefile-localpath-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.getFile(server, remoteFile, localPath, callback)</h3>

<p>Download a file from remote to local.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>remoteFile</code> - A remote file path to read.</li>
<li>
<code>localPath</code> - A local file path to write.</li>
<li>
<code>callback(err)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> is an Error.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.getFile(server,<span class="pl-s"><span class="pl-pds">'</span>/tmp/from_some_remote<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>/tmp/to_some_local<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
    });</pre></div>

<p><a name="putFile"></a></p>

<h3>
<a id="ssh2utilsputfileserver-localfile-remotefile-callback" class="anchor" href="#ssh2utilsputfileserver-localfile-remotefile-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.putFile(server, localFile, remoteFile, callback)</h3>

<p>Put a file from local to remote</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>localFile</code> - A local file path to write.</li>
<li>
<code>remoteFile</code> - A remote file path to read.</li>
<li>
<code>callback(err)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> is an Error.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.putFile(server,<span class="pl-s"><span class="pl-pds">'</span>/tmp/to_some_local<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>/tmp/from_some_remote<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
    });</pre></div>

<p><a name="putDir"></a></p>

<h3>
<a id="ssh2utilsputdirserver-localpath-remotefile-callback" class="anchor" href="#ssh2utilsputdirserver-localpath-remotefile-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.putDir(server, localPath, remoteFile, callback)</h3>

<p>Put a local directory contents to a remote path.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>localPath</code> - A local file path to write.</li>
<li>
<code>remoteFile</code> - A remote file path to read.</li>
<li>
<code>callback(err)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> is an Error.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.putDir(server,<span class="pl-s"><span class="pl-pds">'</span>/tmp/from_some_local<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>/tmp/to_some_remote<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
    });</pre></div>

<p><a name="mkdir"></a></p>

<h3>
<a id="ssh2utilsmkdirserver-remotepath-callback" class="anchor" href="#ssh2utilsmkdirserver-remotepath-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.mkdir(server, remotePath, callback)</h3>

<p>Create a directory at remote path.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>remotePath</code> - A remote path to create.</li>
<li>
<code>callback(err)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> is an Error.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.mkdir(server,<span class="pl-s"><span class="pl-pds">'</span>/tmp/to_some_remote<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
    });</pre></div>

<p><a name="rmdir"></a></p>

<h3>
<a id="ssh2utilsrmdirserver-remotepath-callback" class="anchor" href="#ssh2utilsrmdirserver-remotepath-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.rmdir(server, remotePath, callback)</h3>

<p>Deletes a directory at remote path.</p>

<p>Effectively performs <code>rm -fr remotePath</code>.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>remotePath</code> - A remote path to delete.</li>
<li>
<code>callback(err)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> is an Error.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.rmdir(server,<span class="pl-s"><span class="pl-pds">'</span>/tmp/to_some_remote<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
    });</pre></div>

<p><a name="fileExists"></a></p>

<h3>
<a id="ssh2utilsfileexistsserver-remotepath-callback" class="anchor" href="#ssh2utilsfileexistsserver-remotepath-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>SSH2Utils.fileExists(server, remotePath, callback)</h3>

<p>Tests a path on remote.</p>

<p><strong>Arguments</strong></p>

<ul>
<li>
<code>server</code> - An object of ssh server credentials.</li>
<li>
<code>remotePath</code> - A remote path to tests.</li>
<li>
<code>callback(err)</code> - A callback called on command line completion. 

<ul>
<li>
<code>err</code> is an Error if file does not exists.</li>
<li>
<code>server</code> An ssh server credentials object.</li>
<li>
<code>conn</code> An ssh Client object.</li>
</ul>
</li>
</ul>

<p><strong>Examples</strong></p>

<div class="highlight highlight-js"><pre>    <span class="pl-k">var</span> SSH2Utils <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ssh2-utils<span class="pl-pds">'</span></span>);
    <span class="pl-k">var</span> ssh <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SSH2Utils</span>();

    <span class="pl-k">var</span> server <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, username<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, password<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pwd<span class="pl-pds">"</span></span> };

    ssh.fileExists(server,<span class="pl-s"><span class="pl-pds">'</span>/tmp/to_some_remote<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        <span class="pl-k">if</span>(err) <span class="pl-en">console</span><span class="pl-c1">.log</span>(err);
    });</pre></div>

<hr>

<h1>
<a id="suggestions" class="anchor" href="#suggestions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Suggestions</h1>

<p>On linux you may want to edit <code>/etc/ssh/ssh_config</code> and append </p>

<pre><code>Host 127.0.0.1
   CheckHostIP no
   StrictHostKeyChecking no
   UserKnownHostsFile=/dev/null
</code></pre>

<p>This will help to have multiple vagrant box installed on the same machine.</p>

<hr>

<p>On fedora you may want to create <code>/etc/polkit-1/rules.d/10.virt.rules</code> and add</p>

<pre><code>polkit.addRule(function(action, subject) {
  polkit.log("action=" + action);
  polkit.log("subject=" + subject);
  var now = new Date();
  polkit.log("now=" + now)
  if ((action.id == "org.libvirt.unix.manage"
        || action.id == "org.libvirt.unix.monitor")

        &amp;&amp; subject.isInGroup("~~your username group~~") // &lt;--- change HERE

      ) {
    return polkit.Result.YES;
  }
  return null;
});
</code></pre>

<p>This will help to prevent the system from asking the password.</p>

<hr>

<h1>
<a id="status" class="anchor" href="#status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Status</h1>

<p>In development. It needs some tests. some more methods implementation.</p>
      </section>
    </div>

    
  </body>
</html>